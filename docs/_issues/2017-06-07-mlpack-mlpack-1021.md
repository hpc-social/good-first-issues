---
tags: c-methods,help-wanted,s-keep-open,t-feature-request
title: "Use pass-by-value instead of two overloads for copy and move"
html_url: "https://github.com/mlpack/mlpack/issues/1021"
user: rcurtin
repo: mlpack/mlpack
---

Instead of doing the following:

```
void Method(const arma::mat& data); // makes copy of data
void Method(arma::mat&& data); // doesn't copy data, just moves it
```

we should instead do this:

```
void Method(arma::mat data);
```

In this way, a user can choose whether they want to copy data by calling `Method(data)` or avoid a copy by calling `Method(std::move(data))`, and it allows us to reduce the size of the codebase (sometimes significantly).

More information here:
http://cpptruths.blogspot.com/2012/03/rvalue-references-in-constructor-when.html
and this issue comes out of the discussion for #1014 so there is some more discussion there too.

We can close this issue when we have found and replaced all instances of the pattern, and when we have provided good documentation for how to use these methods and avoid copies.  I would suggest that we add some phrase like `be sure to pass the parameters with std::move() to avoid copies when possible` to the documentation of every function like this, since I don't necessarily expect the C++ users to be familiar with rvalue references in C++11, but that isn't the only option for providing good documentation.