---
tags: contribution-welcome
title: "Isolation of optuna integration modules."
html_url: "https://github.com/optuna/optuna/issues/4484"
user: gen740
repo: optuna/optuna
---

# Isolation of optuna integration modules.

Optuna is now isolating optuna.integration module to [optuna-integration](https://github.com/optuna/optuna-integration.git).
The following is a list of integration modules and their priorities.

| Status  | Module            | Priority             | Note              |
| ------- | ----------------- | -------------------- | ----------------- |
| Done    | AllenNLP          | high                 | #4579             |
|         | BoTorch           | low(**Do not move**) |                   |
|         | Catalyst          | high                 |                   |
|         | CatBoost          | low(**Do not move**)                |                   |
| Done    | Chainer           | high                 | #4497 </br> #4370 |
|         | Dask              | low(**Do not move**) |                   |
|         | fast.ai           | high                 |                   |
| Done    | Keras             | high                 | #4558             |
|         | LightGBM          | low(**Do not move**) |                   |
|         | MLflow            | low(**Do not move**)                   |                   |
|         | Weights & Biases  | low(**Do not move**) |                   |
|         | MXNet             | high                 |                   |
|         | pycma             | low(**Do not move**) |                   |
|         | PyTorch(ignite)   | low(**Do not move**)                 |                   |
|         | PyTorch(lightning)| low(**Do not move**)                 |                   |
|         | PyTorch(ddp)      | low(**Do not move**)                 |                   |
|         | scikit-learn      | low(**Do not move**)                  |                   |
|         | scikit-optimize   | low(**Do not move**) |                   |
|         | SHAP              | low(**Do not move**) |                   |
|         | skorch            | high                 |                   |
|         | TensorBoard        | low(**Do not move**)                 |                   |
|         | TensorFlow        | high                 |                   |
|         | tf.keras       | high                 |                   |
|         | XGBoost           | low(**Do not move**) |                   |

**Do not migrate low-priority module** because it will have some complex dependencies on tests and others. (Migration of low-priority modules would be done by Committers.)

# Migration procedure
Following is the transfer procedure, please follow these instructions

## On the Optuna Integration side:

1. Add the Optuna master branch to the local upstream using `git remote add upstream https://github.com/optuna/optuna.git` command.
1. Check out the relevant file for integration purposes using `git fetch upstream and git checkout upstream/master -- <path/to/file>` command.
    - Move the file paths from optuna/integration/\<module\> to optuna_integration/\<module\> and tests/integration_tests to tests.
    - Create a commit for each file, with a commit message that reads "Fetched from https://github.com/optuna/optuna/commit/<commit-hash\>". \<commit-hash\> can be obtained using `git rev-list upstream/master -- <path/to/file> | head -n 1`.
1. Update the required dependencies in pyproject.toml.
1. Modify the CI workflow file if necessary.
1. Update the imports in tests to use optuna_integration instead of optuna.integration.
1. Add the new module to `docs/source/reference/index.rst`.
1. Add the new module to the relevant section in `README.md`.
1. Change all `optuna.integration` sentences to `optuna_integration`.

## On the Optuna side:

1. Import the package that was migrated from optuna_integration and pass its contents to `__all__` magic variable.
    - For example.
```python
from optuna_integration.chainer import ChainerPruningExtension


__all__ = ["ChainerPruningExtension"]
```
1. Remove the relevant files from `test/integration` and related imports from `test/integration/test_integration.py`.
1. Remove any relevant tests from `pytest tests -m "integration" --ignore`.
1. Remove the relevant documentation from `docs/source/reference/integration.rst`.
1. Remove the integration dependencies from `setup.py/pyproject.toml`, taking care not to remove dependencies that are still needed.
    - Do not remove the relevant imports from `_import_structure` variable in `optuna/integration/__init__.py`, as this would render the `from optuna.integration import ...` idiom unusable.
1. Transfer any relevant issues from Optuna to Optuna Integration.
1. Request that the author of any relevant PRs transfer them from Optuna to Optuna Integration.

**These changes should be merged into `optuna-integration` at first, then merged into `optuna`.**

## On the Optuna exmaple side:
1. Change the corresponding integration's ci yaml to install `optuna-integration`.