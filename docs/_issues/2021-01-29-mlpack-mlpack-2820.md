---
tags: ,c-automatic-bindings,help-wanted,s-keep-open
title: "Add checks for relative input shapes inside bindings."
html_url: "https://github.com/mlpack/mlpack/issues/2820"
user: NippunSharma
repo: mlpack/mlpack
---

### What is the desired addition or change?

A parameter check should be added to all bindings that checks for the correct relative input shapes. For example the training data and training labels must have the same number of samples, testing data and training data must have the same number of features etc.

### What is the motivation for this feature?

Refer to #2818 for more information and how to reproduce the bug.

### If applicable, describe how this feature would be implemented.


- As discussed with @rcurtin the checks should be implemented inside `src/mlpack/core/util/param_check.hpp` and then we should call these checks from the bindings.

- You can take a look at how `RequireOnlyOnePassed` is used the `_main.cpp` files for each method in the `mlpackMain()` function and is implemented in `src/mlpack/core/util/param_check_impl.hpp`. These checks would also be implemented and used similarly.

- We need to check each binding (listed below) separately and add these checks if they are not already there. For example in `Linear SVM` same number of columns between training data and labels are already checked [here](https://github.com/mlpack/mlpack/blob/bf837f950b728bf08b80ccc696c6bc0d296e54af/src/mlpack/methods/linear_svm/linear_svm_main.cpp#L281).

- [ ] adaboost
- [ ] decision_stump
- [ ] decision_tree
- [ ] hoeffding_tree
- [ ] linear_svm
- [ ] logistic_regression
- [ ] nbc
- [ ] perceptron
- [ ] random_forest
- [ ] softmax_regression
- [ ] bayesian_linear_regression
- [ ] lars
- [ ] linear_regression
- [ ] dbscan
- [ ] gmm_train
- [ ] gmm_generate
- [ ] gmm_probability
- [ ] kmeans
- [ ] mean_shift
- [ ] approx_kfn
- [ ] emst
- [ ] fastmks
- [ ] lsh
- [ ] knn
- [ ] kfn
- [ ] krann
- [ ] preprocess_split
- [ ] preprocess_binarize
- [ ] preprocess_describe
- [ ] preprocess_scale
- [ ] preprocess_one_hot_encoding
- [ ] image_converter
- [ ] cf
- [ ] det
- [ ] hmm_train
- [ ] hmm_loglik
- [ ] hmm_viterbi
- [ ] hmm_generate
- [ ] kde
- [ ] nmf
- [ ] kernel_pca
- [ ] lmnn
- [ ] local_coordinate_coding
- [ ] nca
- [ ] pca
- [ ] radical
- [ ] sparse_coding

Note that not all of the bindings written above will require these checks because for some they would be there already. So it would be better to check this before changing any code (please comment below after checking so that I can update the description to indicate where the checks are not required).

### Additional information?

If you can think of a better way to implement it then you can comment below and we can discuss it.

Update: Also replace the occurences where we are comparing sizes of matrices with utilities created in #2370.