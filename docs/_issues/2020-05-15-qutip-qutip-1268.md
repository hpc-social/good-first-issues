---
tags: ,ENH,Q&A,help-wanted
title: "Make testing more robust especially for random objects"
html_url: "https://github.com/qutip/qutip/issues/1268"
user: nathanshammah
repo: qutip/qutip
---

**Is your feature request related to a problem? Please describe.**
A lot of issues in test fail seem to arise from random objects (as well as low-level math in MKL and/or cython issues). 

**Describe the solution you'd like**
There are several options at hand. 

### stick to pytest and be creative
A possible fix in testing may be to add randomly generated data that then is pointed at or fix seeds.
**Pros**: fast (?)
**Cons**: technical debt.

### pytest-randomly plugin
[pytest-randomly](https://github.com/pytest-dev/pytest-randomly) is a pytest plugin that addresses this kind of issues. It allows to control `random.seed`, rather than `numpy.random.seed`.  
**Pros**: pytest plugin, supports doctest. 
**Cons**: not super popular, not designed for numpy
  
### property-based testing with Hypothesis
Hypothesis is a library that aims at changing the way tests are designed, allegedly: it should go from testing an instance to designing a test that applies to a domain of instances ([property-based testing](https://hypothesis.works/)). It is not super clear to me right now.  
It contains various randomness-related features, including a [seed function](https://hypothesis.readthedocs.io/en/latest/reproducing.html#hypothesis.seed).

**Pros**: sounds powerful and clever, popular and growing, well documented, more robust even beyond this randomness problems.
**Cons**: radical change of testing framework (?), steep learning curve (?), overkill (?).

I also admit I used nose until recently / used with pytest tests thought for nose, without taking advantage of pytest full power. 
