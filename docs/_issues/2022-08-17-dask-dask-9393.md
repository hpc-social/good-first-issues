---
tags: enhancement
title: "Is there a good way to issue a warning from a task?"
html_url: "https://github.com/dask/dask/issues/9393"
user: ian-r-rose
repo: dask/dask
---

We have a number of places where we issue user warnings during graph construction time that a user may not be doing what they want to be doing (e.g., [here](https://github.com/dask/dask/blob/785c8456ea2f62e41b0110b07e883eea42f969d2/dask/array/reshape.py#L261-L272)). But in some cases, we may not have all the information we need to issue a warning until a task is actually executed (e.g., it may be based on a dataframe partition length which is unknown at construction time).

If I'm running a single-machine scheduler, I can just use `warnings.warn`, and I get what I want:
```python
import warnings
import dask


@dask.delayed
def do_expensive_thing():
    warnings.warn("Are you sure you want to do this?")
    return 10

dask.compute(do_expensive_thing(), scheduler="processes")
```

But if I'm running with a `distributed` scheduler, that warning gets swallowed, or at least is not easy to recover. I can see the warning again if I swap `distributed.warn` for `warning.warn`:

```python
import distributed
import dask

client = distributed.Client()

@dask.delayed
def do_expensive_thing():
    distributed.warn("Are you sure you want to do this?")
    return 10

client.compute(do_expensive_thing())
```

However, if I'm working in the `dask/dask` collections APIs, I want to remain scheduler-agnostic, and avoid importing `distributed` all over the place. I don't think I have a good way to do that today. One possible way forward could be to create a `dask.warn` utility, along the lines of:

```python
def warn(...):
    try:
        import distributed
        distributed.warn(...)
    except ImportError:
        import warnings
        warnings.warn(...)
```

but there may be better ways.