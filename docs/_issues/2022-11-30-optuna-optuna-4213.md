---
tags: ,contribution-welcome,document
title: "Documentation warnings with Sphinx `nitpicky`"
html_url: "https://github.com/optuna/optuna/issues/4213"
user: hvy
repo: optuna/optuna
---

### What is an issue?

Building the documentation using [Sphinx's `nitpicky`](https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-nitpicky), we can observe several warnings.
At a quick glance, there are several types of different errors

a. Typos in references, e.g. `user_attrs` expected but `user_attr`
b. Referenced target is missing documentation, e.g. `FrozenTrial.suggest_float`
c. Reference to API's in other libraries, such as `numpy` or `torch`

a. should be straight forward to fix. b. and c might need discussions. As for b., we need to ensure that it's actually a public API that should be documented, as for c. we might want to agree on some policy what libraries to include and test to make sure it works. C.f. https://github.com/optuna/optuna/blob/master/docs/source/conf.py and https://docs.readthedocs.io/en/stable/guides/intersphinx.html

#### Repro

1. Add the `-n` (`nitpicky=True`) option in `docs/Makefile`

```diff
diff --git a/docs/Makefile b/docs/Makefile
index 4bdf05f33..579749286 100644
--- a/docs/Makefile
+++ b/docs/Makefile
@@ -2,7 +2,7 @@
 #

 # You can set these variables from the command line.
-SPHINXOPTS    = -W --keep-going
+SPHINXOPTS    = -W --keep-going -n
 SPHINXBUILD   = sphinx-build
 SPHINXPROJ    = Optuna
 SOURCEDIR     = source
```

2. Build the documentation and observe the warnings.

```console
$ pip install -e '.[document]'
$ cd docs
$ make html
# Notice list of warnings.
```

3. (Optional) Debug/check references in the build.

```console
$ open build/html/index.html
```

#### Note

I'd like to hear opinions from other developers about using `-n` in the CI. Using it would make the process (e.g. reviewing) easier.