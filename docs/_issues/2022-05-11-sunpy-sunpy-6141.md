---
tags: ,Effort-Medium,Feature-Request,Good-First-Issue,Package-Novice,Priority-Low,io
title: "FITS reading should emit a warning when memory mapping is explicitly requested but not successful"
html_url: "https://github.com/sunpy/sunpy/issues/6141"
user: ayshih
repo: sunpy/sunpy
---

Our FITS reading currently has the default behavior of attempting to memory map (see #1745), but this memory mapping can silently "fail" and the returned data array will not be memory mapped in certain situations (e.g., the data array needed to be decompressed or scaled).  I don't have a problem with the default behavior being silent.

However, if a user explicitly passes in `memmap=True`, I suggest emitting a warning if the returned data array is not actually memory mapped.  The warning can also suggest to the user to use `disable_image_compression=True` or `do_not_scale_image_data=True` as applicable to preserve memory mapping.

See also https://github.com/sunpy/sunpy/pull/6110#discussion_r865083794