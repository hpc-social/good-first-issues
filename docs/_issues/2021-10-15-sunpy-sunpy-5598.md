---
tags: Effort-Low,Feature-Request,Good-First-Issue,Package-Novice,Priority-Medium,map
title: "Add a helpful error message to `GenericMap.submap()` for helioprojective-related NaNs"
html_url: "https://github.com/sunpy/sunpy/issues/5598"
user: ayshih
repo: sunpy/sunpy
---

It's a recurring source of confusion for users when they try to submap a helioprojective map from one observatory using 2D helioprojective coordinates from a different observatory (or the same observatory at a different time) and one of the corners is off-disk.  Even if the observer-location difference or the observation-time difference is small, formally there is no unambiguous conversion of an off-disk 2D coordinate to a different helioprojective frame because we don't know what assumption to make the coordinate 3D.  (For an on-disk 2D coordinate, we make the broadly safe assumption that the coordinate is on the solar surface in 3D space.)  The coordinate transformation of the corner point returns NaNs, and `submap()` errors ungracefully.

We should add an error message to `submap()` so that it checks if it is about to work with NaNs and tells the user that they likely want to use `Helioprojective.assume_spherical_screen()` so that the off-disk 2D coordinate can be converted to a 3D coordinate.