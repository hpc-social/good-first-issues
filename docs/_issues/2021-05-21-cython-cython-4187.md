---
tags: ,Documentation,help-wanted
title: "[ENH] Pythonise the documentation!"
html_url: "https://github.com/cython/cython/issues/4187"
user: scoder
repo: cython/cython
---

The current documentation stems mostly from a time when Pure Python Mode wasn't even being thought of and aims to present the special `cdef` syntax that Cython uses. The Pure Python Syntax is only presented on the [pure Python tutorial page](http://docs.cython.org/en/latest/src/tutorial/pure.html).

Today, more and more new users come from a Python background that uses type annotations. We should accommodate them by presenting both syntax variants hand in hand throughout the documentation.

If you want to help out, please do the following:

1) Grab a documentation page and duplicate the code examples into separate files, inlcuding the Pure Python variant *before* the `cdef` variant with `literalinclude`. See 
This currently excludes the pages that refer to the integration of external C or C++ code, since some of the required language features are not available in Pure Python code/mode (and this should be mentioned in those places).

For example, a file `add1.pyx`:
```cython
cdef int add1(int x) except -1:
    return x + 1
```
should be accompanied by a file `add1.py`:
```cython
@cython.exceptval(-1)
def add1(x: cython.int):
    return x + 1
```

2) Read the surrounding text to see if there is anything that refers to the specific syntax constructs. Make sure everything is well explained to the readers so that they can easily understand the two examples.

3) Put a paragraph near the top of the page to show a reference to `import cython` and briefly explain the difference between the two syntax variants:
```
.. include::
    ../two-syntax-variants-used
```
This includes the following text:
```
This page uses two different syntax variants: the Cython specific ``cdef`` syntax
and static Cython type declarations in :ref:`pure Python code <pep484_type_annotations>`,
following `PEP-484 <https://www.python.org/dev/peps/pep-0484/>`_ type hints
and `PEP 526 <https://www.python.org/dev/peps/pep-0526/>`_ variable annotations.
To make good use of the latter, including C data types etc., you need
the special ``cython`` module, which you can import with

.. code-block: python

      import cython

in the Python module that you want to compile.
```

Don't forget to link back to this issue in any PRs that you submit.

EDIT: Decisions/approaches taken further down:

- use different file extensions for the two variants: `some_example.py` and `some_example.pyx`
- present both in tabs to make it easy to switch between them
- present the Python syntax variant tab before (left of) the Cython syntax, as the first will eventually become preferable
- keep both source files aligned line by line to highlight the differences on tab switches
- run the .py variant also through Python for syntax/sanity checking (find a way to deal with pure Python cimports)
- automatically add `import cython` to the .py test files in `runtests.py` to avoid having to repeat it in all examples that need it
- explicitly write `import cython` in test examples that are long enough (and need it), especially if they use future imports or directive comments
- see https://github.com/cython/cython/issues/4187#issuecomment-860123077 for further conventions

List of files to consider:


- [Getting Started](https://cython.readthedocs.io/en/latest/src/quickstart/index.html) (#4283)
    - [x] [Building Cython code](https://cython.readthedocs.io/en/latest/src/quickstart/build.html)
    - [x] [Faster code via static typing](https://cython.readthedocs.io/en/latest/src/quickstart/cythonize.html)
- [Tutorials](https://cython.readthedocs.io/en/latest/src/tutorial/index.html)
    - [x] [Basic Tutorial](https://cython.readthedocs.io/en/latest/src/tutorial/cython_tutorial.html) (#4226)
    - [x] [Calling C functions](https://cython.readthedocs.io/en/latest/src/tutorial/external.html) (#4247)
    - [x] [Using C libraries](https://cython.readthedocs.io/en/latest/src/tutorial/clibraries.html) (#4294)
    - [x] [Extension types (aka. cdef classes)](https://cython.readthedocs.io/en/latest/src/tutorial/cdef_classes.html) (#4232)
    - [ ] [pxd files](https://cython.readthedocs.io/en/latest/src/tutorial/pxd_files.html) (#4295)
    - [x] [Profiling](https://cython.readthedocs.io/en/latest/src/tutorial/profiling_tutorial.html) (#4311)
    - [ ] [Unicode and passing strings](https://cython.readthedocs.io/en/latest/src/tutorial/strings.html) (#4389)
    - [x] [Memory Allocation](https://cython.readthedocs.io/en/latest/src/tutorial/memory_allocation.html) (#4316)
    - [ ] [Embedding Cython modules in C/C++ applications](https://cython.readthedocs.io/en/latest/src/tutorial/embedding.html)
    - [ ] [Pure Python Mode](https://cython.readthedocs.io/en/latest/src/tutorial/pure.html)
    - [ ] [Working with NumPy](https://cython.readthedocs.io/en/latest/src/tutorial/numpy.html)
    - [x] [Working with Python arrays](https://cython.readthedocs.io/en/latest/src/tutorial/array.html) (#4508) (#4431)
- [Users Guide](https://cython.readthedocs.io/en/latest/src/userguide/index.html)
    - [x] [Language Basics](https://cython.readthedocs.io/en/latest/src/userguide/language_basics.html) (#4242)
    - [x] [Extension Types](https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html) (#4516)
    - [x] [Special Methods of Extension Types](https://cython.readthedocs.io/en/latest/src/userguide/special_methods.html) (#4537)
    - [x] [Sharing Declarations Between Cython Modules](https://cython.readthedocs.io/en/latest/src/userguide/sharing_declarations.html) (#4544)
    - [ ] [Interfacing with External C Code](https://cython.readthedocs.io/en/latest/src/userguide/external_C_code.html)
    - [ ] [Source Files and Compilation](https://cython.readthedocs.io/en/latest/src/userguide/source_files_and_compilation.html)
    - [x] [Early Binding for Speed](https://cython.readthedocs.io/en/latest/src/userguide/early_binding_for_speed.html)
    - [ ] [Using C++ in Cython](https://cython.readthedocs.io/en/latest/src/userguide/wrapping_CPlusPlus.html)
    - [x] [Fused Types (Templates)](https://cython.readthedocs.io/en/latest/src/userguide/fusedtypes.html)
    - [ ] [Migrating from Cython 0.29 to 3.0](https://cython.readthedocs.io/en/latest/src/userguide/migrating_to_cy30.html)
    - [ ] [Differences between Cython and Pyrex](https://cython.readthedocs.io/en/latest/src/userguide/pyrex_differences.html)
    - [ ] [Typed Memoryviews](https://cython.readthedocs.io/en/latest/src/userguide/memoryviews.html)
    - [x] [Implementing the buffer protocol](https://cython.readthedocs.io/en/latest/src/userguide/buffer.html)
    - [x] [Using Parallelism](https://cython.readthedocs.io/en/latest/src/userguide/parallelism.html) https://github.com/cython/cython/pull/4974
    - [ ] [Cython for NumPy users](https://cython.readthedocs.io/en/latest/src/userguide/numpy_tutorial.html)
