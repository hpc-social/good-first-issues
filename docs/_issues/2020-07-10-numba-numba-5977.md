---
tags: feature_request
title: "Equality tests on floats: add support for math.isclose() and numpy.isclose()"
html_url: "https://github.com/numba/numba/issues/5977"
user: alexandrehuat
repo: numba/numba
---

<!--

Thanks for opening an issue! To help the Numba team handle your information
efficiently, please first ensure that there is no other issue present that
already describes the issue you have
(search at https://github.com/numba/numba/issues?&q=is%3Aissue).

-->

## Feature request

<!--

Please include details of the feature you would like to see, why you would
like to see it/the use case.

-->

When testing the equality of two floating point numbers, it’s good practices to rely on approximations (e.g., `abs(a - b) < epsilon`) rather than on exact/bit-to-bit comparison.

In Python we can use [`math.isclose`](https://docs.python.org/3/library/math.html#math.isclose) or [`numpy.isclose`](https://numpy.org/doc/stable/reference/generated/numpy.isclose.html) to do such tests. These functions are a bit different but both can be equally useful. Unlike the built-in `math.isclose`, `numpy.isclose` is not symmetric in `a` and `b` – it assumes `b` is the reference value – so that `isclose(a, b)` might be different from `isclose(b, a)`.

* Floating point comparison is a common enough operation so that Numba can support it (for both `math` and `numpy` libraries).
* Moreover, all arguments of each function should be supported (relative tolerance, absolute tolerance, and `equal_nan` if existing) because each use case can have specific parameters.

----
*I could not find an issue about that when searching issues with keywords "isclose", "float comparison", "float equality".*